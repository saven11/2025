import streamlit as st
import networkx as nx
import matplotlib.pyplot as plt

# ì‹  ë°ì´í„° (ì˜ì–´ ì´ë¦„ + ì´ëª¨ì§€ í¬í•¨)
gods = {
    "Zeus ì œìš°ìŠ¤âš¡": {"ì„¤ëª…": "ì˜¬ë¦¼í¬ìŠ¤ ìµœê³  ì‹ , í•˜ëŠ˜ê³¼ ë²ˆê°œë¥¼ ë‹¤ìŠ¤ë¦°ë‹¤.", "ìƒì§•": "ë²ˆê°œ, ë…ìˆ˜ë¦¬", "ì„±ê²©": "ê¶Œìœ„ì ì´ì§€ë§Œ ë³€ë•ìŠ¤ëŸ¬ì›€.", "ê´€ê³„": ["Hera ğŸ‘‘", "Athena ğŸ¦‰", "Apollo ğŸ¶", "Artemis ğŸ¹", "Ares ğŸ—¡ï¸", "Aphrodite ğŸ’–", "Poseidon ğŸŒŠ", "Hades ğŸ’€", "Hermes ğŸ•Šï¸", "Hephaestus ğŸ”¨"]},
    "Hera í—¤ë¼ ğŸ‘‘": {"ì„¤ëª…": "ê²°í˜¼ê³¼ ê°€ì •ì˜ ì—¬ì‹ , ì œìš°ìŠ¤ì˜ ì•„ë‚´.", "ìƒì§•": "ê³µì‘, ì™•ê´€", "ì„±ê²©": "ì§ˆíˆ¬ì‹¬ì´ ê°•í•˜ê³  ê°€ì •ì„ ì¤‘ì‹œ.", "ê´€ê³„": ["Zeus âš¡", "Ares ğŸ—¡ï¸", "Hephaestus ğŸ”¨"]},
    "Poseidon í¬ì„¸ì´ëˆ ğŸŒŠ": {"ì„¤ëª…": "ë°”ë‹¤ì˜ ì‹ , ì§€ì§„ê³¼ ë°”ë‹¤ë¥¼ ë‹¤ìŠ¤ë¦¼.", "ìƒì§•": "ì‚¼ì§€ì°½, ë§", "ì„±ê²©": "ê±°ì¹ ê³  ê°•ë ¥í•¨.", "ê´€ê³„": ["Zeus âš¡", "Hades ğŸ’€"]},
    "Hades í•˜ë°ìŠ¤ ğŸ’€": {"ì„¤ëª…": "ì €ìŠ¹ì˜ ì‹ .", "ìƒì§•": "ì¼€ë¥´ë² ë¡œìŠ¤, íˆ¬êµ¬", "ì„±ê²©": "ì—„ê²©í•˜ê³  ëƒ‰ì •í•¨.", "ê´€ê³„": ["Zeus âš¡", "Poseidon ğŸŒŠ", "Persephone ğŸŒ¸"]},
    "Athena ì•„í…Œë‚˜ ğŸ¦‰": {"ì„¤ëª…": "ì§€í˜œì™€ ì „ìŸ ì „ëµì˜ ì—¬ì‹ .", "ìƒì§•": "ë¶€ì—‰ì´, ë°©íŒ¨", "ì„±ê²©": "ì§€í˜œë¡­ê³  ì „ëµì .", "ê´€ê³„": ["Zeus âš¡", "Poseidon ğŸŒŠ"]},
    "Apollo ì•„í´ë¡œ ğŸ¶": {"ì„¤ëª…": "ìŒì•…ê³¼ íƒœì–‘, ì˜ˆì–¸ì˜ ì‹ .", "ìƒì§•": "ë¦¬ë¼, íƒœì–‘", "ì„±ê²©": "ì˜ˆìˆ ì ì´ê³  ìë¶€ì‹¬ ê°•í•¨.", "ê´€ê³„": ["Zeus âš¡", "Artemis ğŸ¹", "Daphne ğŸŒ¿"]},
    "Artemis ì•„ë¥´í…Œë¯¸ìŠ¤ ğŸ¹": {"ì„¤ëª…": "ì‚¬ëƒ¥ê³¼ ë‹¬ì˜ ì—¬ì‹ .", "ìƒì§•": "í™œ, ì‚¬ìŠ´", "ì„±ê²©": "ììœ ë¡­ê³  ë…ë¦½ì .", "ê´€ê³„": ["Apollo ğŸ¶"]},
    "Ares ì•„ë ˆìŠ¤ ğŸ—¡ï¸": {"ì„¤ëª…": "ì „ìŸì˜ ì‹ .", "ìƒì§•": "ì°½, ë°©íŒ¨", "ì„±ê²©": "ì¶©ë™ì ì´ê³  ê³µê²©ì .", "ê´€ê³„": ["Hera ğŸ‘‘", "Aphrodite ğŸ’–"]},
    "Aphrodite ì•„í”„ë¡œë””í…Œ ğŸ’–": {"ì„¤ëª…": "ì‚¬ë‘ê³¼ ë¯¸ì˜ ì—¬ì‹ .", "ìƒì§•": "ë¹„ë‘˜ê¸°, ì¡°ê°œ", "ì„±ê²©": "ë§¤í˜¹ì ì´ê³  ììœ ë¶„ë°©.", "ê´€ê³„": ["Ares ğŸ—¡ï¸", "Hephaestus ğŸ”¨"]},
    "Hermes í—¤ë¥´ë©”ìŠ¤ ğŸ•Šï¸": {"ì„¤ëª…": "ì‹ ë“¤ì˜ ì „ë ¹, ìƒì—…ê³¼ ë„ë‘‘ì˜ ìˆ˜í˜¸ì‹ .", "ìƒì§•": "ë‚ ê°œ ë‹¬ë¦° ì‹ ë°œ, ì§€íŒ¡ì´", "ì„±ê²©": "ì˜ë¦¬í•˜ê³  ì¬ì¹˜ ìˆìŒ.", "ê´€ê³„": ["Zeus âš¡"]},
    "Hephaestus í—¤íŒŒì´ìŠ¤í† ìŠ¤ ğŸ”¨": {"ì„¤ëª…": "ëŒ€ì¥ì¥ì´ì˜ ì‹ , ë¶ˆê³¼ ê¸ˆì†ì˜ ì‹ .", "ìƒì§•": "ë§ì¹˜, ëª¨ë£¨", "ì„±ê²©": "ê·¼ë©´í•˜ê³  ì°½ì˜ì .", "ê´€ê³„": ["Hera ğŸ‘‘", "Aphrodite ğŸ’–"]},
    "Persephone í˜ë¥´ì„¸í¬ë„¤ ğŸŒ¸": {"ì„¤ëª…": "ì €ìŠ¹ì˜ ì—¬ì™•ì´ì ë´„ì˜ ì—¬ì‹ .", "ìƒì§•": "ì„ë¥˜", "ì„±ê²©": "ìˆœìˆ˜í•˜ë©´ì„œë„ ê°•í•¨.", "ê´€ê³„": ["Hades ğŸ’€", "Demeter ğŸŒ¾"]},
    "Demeter ë°ë©”í…Œë¥´ ğŸŒ¾": {"ì„¤ëª…": "ë†ì—…ê³¼ í’ìš”ì˜ ì—¬ì‹ .", "ìƒì§•": "ê³¡ì‹ ì´ì‚­", "ì„±ê²©": "ëª¨ì„±ì ì´ê³  ìì• ë¡œì›€.", "ê´€ê³„": ["Persephone ğŸŒ¸"]},
    "Daphne ë‹¤í”„ë„¤ ğŸŒ¿": {"ì„¤ëª…": "ê°•ì˜ ì‹ ì˜ ë”¸, ì•„í´ë¡ ì—ê²Œ ì«“ê¸°ë‹¤ ì›”ê³„ìˆ˜ë¡œ ë³€í•¨.", "ìƒì§•": "ì›”ê³„ìˆ˜", "ì„±ê²©": "ìˆœê²°ê³¼ ììœ ë¥¼ ì‚¬ë‘í•¨.", "ê´€ê³„": ["Apollo ğŸ¶"]},
    "Dionysus ë””ì˜¤ë‹ˆì†ŒìŠ¤ ğŸ‡": {"ì„¤ëª…": "í¬ë„ì£¼ì™€ ì¶•ì œì˜ ì‹ .", "ìƒì§•": "í¬ë„, ì™€ì¸ì”", "ì„±ê²©": "ì¾Œí™œí•˜ê³  ììœ ë¶„ë°©.", "ê´€ê³„": ["Zeus âš¡"]},
    "Hecate í—¤ì¹´í…Œ ğŸŒ™": {"ì„¤ëª…": "ë§ˆë²•ê³¼ ë‹¬, ë°¤ì˜ ì—¬ì‹ .", "ìƒì§•": "ë‹¬, ì§€íŒ¡ì´", "ì„±ê²©": "ì‹ ë¹„ë¡­ê³  ë…ë¦½ì .", "ê´€ê³„": []}
}

# ê´€ê³„ë³„ ì„¤í™” ë°ì´í„°
myths = {
    ("Zeus âš¡", "Hera ğŸ‘‘"): "ëì—†ëŠ” ë¶€ë¶€ ì‹¸ì›€ê³¼ ì§ˆíˆ¬ ì´ì•¼ê¸°.",
    ("Zeus âš¡", "Athena ğŸ¦‰"): "Zeus ë¨¸ë¦¬ì—ì„œ íƒœì–´ë‚œ Athena.",
    ("Hades ğŸ’€", "Persephone ğŸŒ¸"): "ì €ìŠ¹ ë‚©ì¹˜ë¡œ ê³„ì ˆì´ ìƒê¸´ ì´ì•¼ê¸°.",
    ("Apollo ğŸ¶", "Artemis ğŸ¹"): "ìŒë‘¥ì´ ë‚¨ë§¤ ì´ì•¼ê¸°.",
    ("Aphrodite ğŸ’–", "Ares ğŸ—¡ï¸"): "ë°€íšŒê°€ ë°œê°ëœ ì´ì•¼ê¸°.",
    ("Apollo ğŸ¶", "Daphne ğŸŒ¿"): "Daphneê°€ ì›”ê³„ìˆ˜ë¡œ ë³€í•œ ì´ì•¼ê¸°."
}

# ì•± ì‹œì‘
st.set_page_config(page_title="ê·¸ë¦¬ìŠ¤ ë¡œë§ˆ ì‹ í™” ì¸ë¬¼ ì‚¬ì „", layout="wide")
st.title("ğŸ›ï¸ ê·¸ë¦¬ìŠ¤ ë¡œë§ˆ ì‹ í™” ì¸ë¬¼ ì‚¬ì „")

selected_god = st.selectbox("ì‹ ì„ ì„ íƒí•˜ì„¸ìš”", sorted(list(gods.keys())))
god_info = gods[selected_god]

st.subheader(f"{selected_god}")
st.write(f"**ì„¤ëª…:** {god_info['ì„¤ëª…']}")
st.write(f"**ìƒì§•:** {god_info['ìƒì§•']}")
st.write(f"**ì„±ê²©:** {god_info['ì„±ê²©']}")

# ê´€ê³„ ì‹œê°í™”
graph = nx.Graph()
graph.add_node(selected_god)
for relation in god_info["ê´€ê³„"]:
    if relation not in gods:
        continue
    graph.add_node(relation)
    story = myths.get((selected_god, relation)) or myths.get((relation, selected_god))
    label = story if story else ""
    graph.add_edge(selected_god, relation, label=label)

pos = nx.spring_layout(graph, seed=42, k=0.3)  # ì„  ê¸¸ì´ ì¡°ì •
plt.figure(figsize=(8,8))
nx.draw_networkx_nodes(graph, pos, node_color='lightyellow', node_size=2000)
nx.draw_networkx_labels(graph, pos, font_family="DejaVu Sans", font_weight='bold')
edge_labels = nx.get_edge_attributes(graph, 'label')
nx.draw_networkx_edge_labels(graph, pos, edge_labels=edge_labels, font_family="DejaVu Sans")
nx.draw_networkx_edges(graph, pos)
st.pyplot(plt)

# ê´€ê³„ ì„¤í™” í‘œì‹œ
for relation in god_info["ê´€ê³„"]:
    story = myths.get((selected_god, relation)) or myths.get((relation, selected_god))
    if story:
        st.markdown(f"**ğŸ“– {selected_god} â†” {relation}**: {story}")
